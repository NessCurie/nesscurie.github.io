<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>使用树结构的方式对Java的byte数组进行快速解析和构建 | Möbius Strip World</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><meta name="generator" content="Hexo 4.2.1"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">使用树结构的方式对Java的byte数组进行快速解析和构建</h1><a id="logo" href="/.">Möbius Strip World</a><p class="description">What will your verse be ？</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">使用树结构的方式对Java的byte数组进行快速解析和构建</h1><div class="post-meta">Aug 7, 2018<span> | </span><span class="category"><a href="/categories/Java/">Java</a></span></div><a class="disqus-comment-count" href="/2018/08/07/byte%E6%95%B0%E7%BB%84%E5%BC%8F%E5%8D%8F%E8%AE%AE%E8%A7%A3%E6%9E%90/%E4%BD%BF%E7%94%A8%E6%A0%91%E7%BB%93%E6%9E%84%E7%9A%84%E6%96%B9%E5%BC%8F%E5%AF%B9Java%E7%9A%84byte%E6%95%B0%E7%BB%84%E8%BF%9B%E8%A1%8C%E5%BF%AB%E9%80%9F%E8%A7%A3%E6%9E%90%E5%92%8C%E6%9E%84%E5%BB%BA/#vcomment"><span class="valine-comment-count" data-xid="/2018/08/07/byte%E6%95%B0%E7%BB%84%E5%BC%8F%E5%8D%8F%E8%AE%AE%E8%A7%A3%E6%9E%90/%E4%BD%BF%E7%94%A8%E6%A0%91%E7%BB%93%E6%9E%84%E7%9A%84%E6%96%B9%E5%BC%8F%E5%AF%B9Java%E7%9A%84byte%E6%95%B0%E7%BB%84%E8%BF%9B%E8%A1%8C%E5%BF%AB%E9%80%9F%E8%A7%A3%E6%9E%90%E5%92%8C%E6%9E%84%E5%BB%BA/"></span><span> Comment</span></a><div class="post-content"><p>相比于ByteArrayList和BytesReader,这种方式可以更直观的体现出这段byte数组是什么样的结构,并高效进行重复解析和构建</p>
<h3 id="对各种数据类型进行定义"><a href="#对各种数据类型进行定义" class="headerlink" title="对各种数据类型进行定义"></a>对各种数据类型进行定义</h3><ul>
<li>对于无符号数据类型和有符号数据类型,进行自定义类型,这样更直观</li>
<li>对于一段数据表示后续数据长度的可变数据类型进行定义,包括:<ul>
<li>第一字节为无符号8位 表示后续的内容长度 长度后续紧跟内容</li>
<li>前两字节为小端无符号16位 表示后续的内容长度 长度后续紧跟内容</li>
<li>前四字节为小端无符号32位 表示后续的内容长度 长度后续紧跟内容</li>
<li>前两字节为大端无符号16位 表示后续的内容长度 长度后续紧跟内容</li>
<li>前四字节为大端无符号32位 表示后续的内容长度 长度后续紧跟内容</li>
</ul>
</li>
<li>有时候末尾的数据不进行上述定义为任意长度,直接表示剩余数据都为某种数据,对这种数据进行定义</li>
<li>在某个节点中包含很多子节点,有时候这些子节点是相同的,一般将这些子节点额外定义以便复用</li>
</ul>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><ol>
<li><p>根据以上要点,实现如下定义:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据的类型,表示一段byte数组是什么类型的数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DataType</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 无符号8位 java用short接收</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_U8 = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 有符号8位 byte</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_S8 = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 无符号16位 java用int接收</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_U16 = <span class="number">2</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 有符号16位 short</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_S16 = <span class="number">3</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 无符号32位 java用long接收</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_U32 = <span class="number">4</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 有符号32位 int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_S32 = <span class="number">5</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 无符号64位 目前不支持</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_U64 = <span class="number">6</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 有符号64位 long</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_S64 = <span class="number">7</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * float</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_FLOAT = <span class="number">8</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * double</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_DOUBLE = <span class="number">9</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 可变数据类型1 第一字节为无符号8位 表示后续的内容长度 长度后续紧跟内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_MUABLE0 = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 可变数据类型2 前两字节为小端无符号16位 表示后续的内容长度 长度后续紧跟内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_MUABLE1 = <span class="number">11</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 可变数据类型3 前四字节为小端无符号32位 表示后续的内容长度 长度后续紧跟内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_MUABLE2 = <span class="number">12</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 可变数据类型4 前两字节为大端无符号16位 表示后续的内容长度 长度后续紧跟内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_MUABLE1_BE = <span class="number">13</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 可变数据类型5 前四字节为大端无符号32位 表示后续的内容长度 长度后续紧跟内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_MUABLE2_BE = <span class="number">14</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 树结构类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_TREE = <span class="number">100</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 原始数据类型 byte[]</span></span><br><span class="line"><span class="comment">     * 当初始化时指定了长度时在获取时会获取对应长度的数据,若未指定长度在获取时会获取剩余的所有数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> TYPE_RAW = <span class="number">200</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写一个描述类进行解析时无需关心数据的具体内容,使用此类进行构建,解析时根据此类根据描述类对其进行解析即可<br>节点的描述中表示了该节点的数据类型、部分数据类型和大小端</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对于 byte数组 的描述 表示这段byte数组是:什么类型,长度为多少,是大端还是小端</span></span><br><span class="line"><span class="comment"> * 构造时如果不传入是否大小端,默认是小端</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataDescribe</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据类型 &#123;<span class="doctag">@link</span> DataType&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> type;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据长度</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> length;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 是否为小端</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">boolean</span> isLe;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 大多数数据的长度初始化时其实都是固定的,没必要在构造时手动填入</span></span><br><span class="line"><span class="comment">     * 除了 &#123;<span class="doctag">@link</span> DataType#TYPE_RAW&#125; 可能需要传入长度,其他都不需要</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DataDescribe</span><span class="params">(<span class="keyword">int</span> type, <span class="keyword">boolean</span> isLe)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">        <span class="keyword">this</span>.isLe = isLe;</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_U8:</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_S8:</span><br><span class="line">                length = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_U16:</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_S16:</span><br><span class="line">                length = <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_U32:</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_S32:</span><br><span class="line">                length = <span class="number">4</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_S64:</span><br><span class="line">                length = <span class="number">8</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_FLOAT:</span><br><span class="line">                length = <span class="number">4</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_DOUBLE:</span><br><span class="line">                length = <span class="number">8</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_MUABLE0:</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_MUABLE1:</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_MUABLE2:</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_MUABLE1_BE:</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_MUABLE2_BE:</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_TREE:</span><br><span class="line">            <span class="keyword">case</span> DataType.TYPE_RAW:</span><br><span class="line">                length = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认小端</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DataDescribe</span><span class="params">(<span class="keyword">int</span> type)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(type, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> type 数据类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> len  数据长度  除了 &#123;<span class="doctag">@link</span> DataType#TYPE_RAW&#125; 可能需要传入长度,其他实际上都不需要</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> le   是否是小端</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DataDescribe</span><span class="params">(<span class="keyword">int</span> type, <span class="keyword">int</span> len, <span class="keyword">boolean</span> le)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">        length = len;</span><br><span class="line">        isLe = le;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认小端</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DataDescribe</span><span class="params">(<span class="keyword">int</span> type, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(type, len, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="进行树的实现"><a href="#进行树的实现" class="headerlink" title="进行树的实现"></a>进行树的实现</h3><p>异常处理:</p>
<ul>
<li>设置指定的位置的数据与描述中的位置不匹配时不会进行设置,对应的位置会为null</li>
<li>获取指定的位置的数据与描述中的位置不匹配时会默认返回0<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Tree</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 节点 根据des中的顺序存储着对应的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> SparseArray&lt;Tree&gt; node = <span class="keyword">new</span> SparseArray&lt;&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 节点的描述 表示节点&#123;<span class="doctag">@link</span> Tree#node&#125;下存储的是哪些些数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> DataDescribe[] des;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 代表当前节点下的所有内容的数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据节点的描述初始化本类的描述</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Tree</span><span class="params">(@NonNull DataDescribe[] des)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.des = des;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 会将传入的多个子Tree依次放入 des描述的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Tree</span><span class="params">(@NonNull DataDescribe[] des, Tree... child)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.des = des;</span><br><span class="line">        <span class="keyword">int</span> index = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (Tree tree : child) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = index + <span class="number">1</span>; i &lt; des.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (des[i].type == DataType.TYPE_TREE) &#123;</span><br><span class="line">                    index = i;</span><br><span class="line">                    node.put(index, tree);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Tree</span><span class="params">(<span class="keyword">byte</span> b)</span> </span>&#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="keyword">byte</span>[]&#123;b&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Tree</span><span class="params">(<span class="keyword">byte</span>[] src)</span> </span>&#123;</span><br><span class="line">        data = src;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Tree</span><span class="params">(<span class="keyword">short</span> val, <span class="keyword">boolean</span> isU8, <span class="keyword">boolean</span> le)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isU8) &#123;</span><br><span class="line">            data = <span class="keyword">new</span> <span class="keyword">byte</span>[]&#123;(<span class="keyword">byte</span>) (val &amp; <span class="number">0xff</span>)&#125;;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            data = le ? EndianUtils.toLe(val) : EndianUtils.toBe(val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Tree</span><span class="params">(<span class="keyword">int</span> val, <span class="keyword">boolean</span> isU16, <span class="keyword">boolean</span> le)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isU16) &#123;</span><br><span class="line">            data = le ? EndianUtils.u16ToLe(val) : EndianUtils.u16ToBe(val);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            data = le ? EndianUtils.toLe(val) : EndianUtils.toBe(val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Tree</span><span class="params">(<span class="keyword">long</span> val, <span class="keyword">boolean</span> isU32, <span class="keyword">boolean</span> le)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isU32) &#123;</span><br><span class="line">            data = le ? EndianUtils.u32ToLe(val) : EndianUtils.u32ToBe(val);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            data = le ? EndianUtils.toLe(val) : EndianUtils.toBe(val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Tree</span><span class="params">(<span class="keyword">float</span> val, <span class="keyword">boolean</span> le)</span> </span>&#123;</span><br><span class="line">        data = le ? EndianUtils.toLe(val) : EndianUtils.toBe(val);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Tree</span><span class="params">(<span class="keyword">double</span> val, <span class="keyword">boolean</span> le)</span> </span>&#123;</span><br><span class="line">        data = le ? EndianUtils.toLe(val) : EndianUtils.toBe(val);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Tree</span><span class="params">(<span class="keyword">int</span> type, String val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] src = val.getBytes(<span class="string">"GBK"</span>);</span><br><span class="line">            ByteArrayList list = <span class="keyword">new</span> ByteArrayList();</span><br><span class="line">            <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE0:</span><br><span class="line">                    <span class="keyword">if</span> (src.length &lt;= <span class="number">255</span>) &#123;</span><br><span class="line">                        list.add((<span class="keyword">byte</span>) src.length);</span><br><span class="line">                        list.add(src);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE1:</span><br><span class="line">                    <span class="keyword">if</span> (src.length &lt;= <span class="number">65535</span>) &#123;</span><br><span class="line">                        list.add((<span class="keyword">short</span>) src.length, <span class="keyword">true</span>);</span><br><span class="line">                        list.add(src);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE2:</span><br><span class="line">                    list.add(src.length, <span class="keyword">true</span>);</span><br><span class="line">                    list.add(src);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE1_BE:</span><br><span class="line">                    <span class="keyword">if</span> (src.length &lt;= <span class="number">65535</span>) &#123;</span><br><span class="line">                        list.add((<span class="keyword">short</span>) src.length, <span class="keyword">false</span>);</span><br><span class="line">                        list.add(src);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE2_BE:</span><br><span class="line">                    list.add(src.length, <span class="keyword">false</span>);</span><br><span class="line">                    list.add(src);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            data = list.toArray();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException ignored) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置有符号8位到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setS8</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">byte</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_S8) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置无符号8位到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setU8</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">short</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_U8) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val, <span class="keyword">true</span>, des[index].isLe));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置有符号16位到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setS16</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">short</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_S16) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val, <span class="keyword">false</span>, des[index].isLe));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置无符号16位到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setU16</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_U16) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val, <span class="keyword">true</span>, des[index].isLe));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置有符号32位到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setS32</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_S32) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val, <span class="keyword">false</span>, des[index].isLe));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置无符号32位到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setU32</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">long</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_U32) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val, <span class="keyword">true</span>, des[index].isLe));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置有符号64位到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setS64</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">long</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_S64) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val, <span class="keyword">false</span>, des[index].isLe));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置float类型的数据到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setFloat</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">float</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_FLOAT) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val, des[index].isLe));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置double类型的数据到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setDouble</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">double</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_DOUBLE) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val, des[index].isLe));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置byte数组到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setBytes</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">byte</span>[] val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_RAW) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(val));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置字符串数据到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setString</span><span class="params">(<span class="keyword">int</span> index, String val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; (des[index].type == DataType.TYPE_MUABLE0 ||</span><br><span class="line">                des[index].type == DataType.TYPE_MUABLE1 ||</span><br><span class="line">                des[index].type == DataType.TYPE_MUABLE2 ||</span><br><span class="line">                des[index].type == DataType.TYPE_MUABLE1_BE ||</span><br><span class="line">                des[index].type == DataType.TYPE_MUABLE2_BE)) &#123;</span><br><span class="line">            node.put(index, <span class="keyword">new</span> Tree(des[index].type, val));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置子节点到本节点的指定位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setChildTree</span><span class="params">(<span class="keyword">int</span> index, Tree val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_TREE) &#123;</span><br><span class="line">            node.put(index, val);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">setChildTree</span><span class="params">(<span class="keyword">int</span> index, DataDescribe[] des)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> setChildTree(index, <span class="keyword">new</span> Tree(des));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取无符号8位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">short</span> <span class="title">getU8</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_U8) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> field.data[<span class="number">0</span>] &lt; <span class="number">0</span> ? (<span class="keyword">short</span>) (<span class="number">256</span> + field.data[<span class="number">0</span>]) : (<span class="keyword">short</span>) (field.data[<span class="number">0</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取有符号8位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">byte</span> <span class="title">getS8</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_S8) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> field.data[<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取无符号16位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getU16</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_U16) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> des[index].isLe ? EndianUtils.le2U16(field.data) : EndianUtils.be2U16(field.data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取有符号16位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">short</span> <span class="title">getS16</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_S16) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> des[index].isLe ? EndianUtils.le2Short(field.data) : EndianUtils.be2Short(field.data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取无符号32位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getU32</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_U32) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> des[index].isLe ? EndianUtils.le2U32(field.data) : EndianUtils.be2U32(field.data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取有符号32位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getS32</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_S32) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> des[index].isLe ? EndianUtils.le2Int(field.data) : EndianUtils.be2Int(field.data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取有符号64位</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getS64</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_S64) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> des[index].isLe ? EndianUtils.le2Long(field.data) : EndianUtils.be2Long(field.data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取float类型数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getFloat</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_FLOAT) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> des[index].isLe ? EndianUtils.le2Float(field.data) : EndianUtils.be2Float(field.data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取double类型数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getDouble</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_DOUBLE) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> des[index].isLe ? EndianUtils.le2Double(field.data) : EndianUtils.be2Double(field.data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取byte数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] getBytes(<span class="keyword">int</span> index) &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; des[index].type == DataType.TYPE_RAW) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> field.data;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置使用指定字符集获取string数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getString</span><span class="params">(<span class="keyword">int</span> index, String charSet)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (TextUtils.isEmpty(charSet)) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; des.length &amp;&amp; (des[index].type == DataType.TYPE_MUABLE0 ||</span><br><span class="line">                des[index].type == DataType.TYPE_MUABLE1 ||</span><br><span class="line">                des[index].type == DataType.TYPE_MUABLE2 ||</span><br><span class="line">                des[index].type == DataType.TYPE_MUABLE1_BE ||</span><br><span class="line">                des[index].type == DataType.TYPE_MUABLE2_BE)) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            <span class="keyword">if</span> (field != <span class="keyword">null</span> &amp;&amp; field.data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                BytesReader reader = <span class="keyword">new</span> BytesReader(field.data);</span><br><span class="line">                <span class="keyword">switch</span> (des[index].type) &#123;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE0:</span><br><span class="line">                        reader.getU8();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE1:</span><br><span class="line">                        reader.getU16(<span class="keyword">true</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE2:</span><br><span class="line">                        reader.getU32(<span class="keyword">true</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE1_BE:</span><br><span class="line">                        reader.getU16(<span class="keyword">false</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE2_BE:</span><br><span class="line">                        reader.getU32(<span class="keyword">false</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">byte</span>[] data = reader.getResidue();</span><br><span class="line">                    <span class="keyword">if</span> (data != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">new</span> String(data, charSet);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (UnsupportedEncodingException ignored) &#123;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置使用默认的GBK字符集获取string数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getString</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getString(index, <span class="string">"GBK"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从本节点中指定位置获取子节点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">getChildTree</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> node.get(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将包含的所有内容转化为byte数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">byte</span>[] toByteArray() &#123;</span><br><span class="line">        ByteArrayList list = <span class="keyword">new</span> ByteArrayList();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; des.length; index++) &#123;</span><br><span class="line">            Tree field = node.get(index);</span><br><span class="line">            DataDescribe dataDescribe = des[index];</span><br><span class="line">            <span class="keyword">switch</span> (dataDescribe.type) &#123;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_U8:</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_S8:</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_U16:</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_S16:</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_U32:</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_S32:</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_S64:</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_FLOAT:</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_DOUBLE:</span><br><span class="line">                    <span class="keyword">if</span> (field == <span class="keyword">null</span> || field.data == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        list.addSize(dataDescribe.length);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        list.add(field.data);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE0:</span><br><span class="line">                    <span class="keyword">if</span> (field == <span class="keyword">null</span> || field.data == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        list.add((<span class="keyword">byte</span>) <span class="number">0</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        list.add(field.data);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE1:</span><br><span class="line">                    <span class="keyword">if</span> (field == <span class="keyword">null</span> || field.data == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        list.add((<span class="keyword">short</span>) <span class="number">0</span>, <span class="keyword">true</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        list.add(field.data);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE2:</span><br><span class="line">                    <span class="keyword">if</span> (field == <span class="keyword">null</span> || field.data == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        list.add(<span class="number">0</span>, <span class="keyword">true</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        list.add(field.data);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE1_BE:</span><br><span class="line">                    <span class="keyword">if</span> (field == <span class="keyword">null</span> || field.data == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        list.add((<span class="keyword">short</span>) <span class="number">0</span>, <span class="keyword">false</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        list.add(field.data);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_MUABLE2_BE:</span><br><span class="line">                    <span class="keyword">if</span> (field == <span class="keyword">null</span> || field.data == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        list.add(<span class="number">0</span>, <span class="keyword">false</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        list.add(field.data);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_TREE:</span><br><span class="line">                    <span class="keyword">if</span> (field != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        list.add(field.toByteArray());</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DataType.TYPE_RAW:</span><br><span class="line">                    <span class="keyword">if</span> (field == <span class="keyword">null</span> || field.data == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        list.addSize(dataDescribe.length);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (dataDescribe.length != <span class="number">0</span> &amp;&amp; field.data.length != dataDescribe.length) &#123;</span><br><span class="line">                            list.add(Arrays.copyOf(field.data, dataDescribe.length));</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            list.add(field.data);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalMonitorStateException(<span class="string">"don't have the type "</span> + dataDescribe.type);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list.toArray();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将byte数组 解析为 根据结构描述&#123;<span class="doctag">@link</span> Tree#des&#125;的 树</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">parserByteArray</span><span class="params">(@NonNull <span class="keyword">byte</span>[] src)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (src != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> parserByteArray(<span class="keyword">new</span> BytesReader(src));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将BytesReader对象 解析为 根据结构描述&#123;<span class="doctag">@link</span> Tree#des&#125;的 树</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Tree <span class="title">parserByteArray</span><span class="params">(@NonNull BytesReader reader)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (reader != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; des.length; index++) &#123;</span><br><span class="line">                DataDescribe dataDescribe = des[index];</span><br><span class="line">                <span class="keyword">switch</span> (dataDescribe.type) &#123;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_U8:</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_S8:</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_U16:</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_S16:</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_U32:</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_S32:</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_S64:</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_FLOAT:</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_DOUBLE:</span><br><span class="line">                        node.put(index, <span class="keyword">new</span> Tree(reader.getBytes(dataDescribe.length)));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE0:</span><br><span class="line">                        node.put(index, <span class="keyword">new</span> Tree(reader.getBytes(<span class="number">1</span> + reader.spyU8())));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE1:</span><br><span class="line">                        node.put(index, <span class="keyword">new</span> Tree(reader.getBytes(<span class="number">2</span> + reader.spyU16(<span class="keyword">true</span>))));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE2:</span><br><span class="line">                        node.put(index, <span class="keyword">new</span> Tree(reader.getBytes(<span class="number">4</span> + (<span class="keyword">int</span>) reader.spyU32(<span class="keyword">true</span>))));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE1_BE:</span><br><span class="line">                        node.put(index, <span class="keyword">new</span> Tree(reader.getBytes(<span class="number">2</span> + reader.spyU16(<span class="keyword">false</span>))));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_MUABLE2_BE:</span><br><span class="line">                        node.put(index, <span class="keyword">new</span> Tree(reader.getBytes(<span class="number">4</span> + (<span class="keyword">int</span>) reader.spyU32(<span class="keyword">false</span>))));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_TREE:</span><br><span class="line">                        Tree field = node.get(index);</span><br><span class="line">                        <span class="keyword">if</span> (field != <span class="keyword">null</span>) field.parserByteArray(reader);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> DataType.TYPE_RAW:</span><br><span class="line">                        node.put(index, <span class="keyword">new</span> Tree(dataDescribe.length &gt; <span class="number">0</span> ?</span><br><span class="line">                                reader.getBytes(dataDescribe.length) : reader.getResidue()));</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalMonitorStateException(<span class="string">"don't have the type "</span> + dataDescribe.type);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ol>
<li><p>定义公共部分</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> publicTreeDescribes = arrayOf(DataDescribe(DataType.TYPE_U8), DataDescribe(DataType.TYPE_U8))</span><br></pre></td></tr></table></figure>
</li>
<li><p>对总结构进行定义</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> describes = arrayOf(DataDescribe(DataType.TYPE_TREE),</span><br><span class="line">            DataDescribe(DataType.TYPE_U8), DataDescribe(DataType.TYPE_S32),</span><br><span class="line">            DataDescribe(DataType.TYPE_FLOAT), DataDescribe(DataType.TYPE_U32),</span><br><span class="line">            DataDescribe(DataType.TYPE_MUABLE0, stringLength))</span><br></pre></td></tr></table></figure>
</li>
<li><p>将描述传入树结构,并将公共部分设置入总结构<br>因为代码进行了链式实现,可以进行链式调用</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> paresTree = Tree(describes)</span><br><span class="line">            .setChildTree(<span class="number">0</span>, publicTreeDescribes)</span><br></pre></td></tr></table></figure>
</li>
<li><p>根据索引进行数据设置或传入数据进行解析根据索引进行获取</p>
</li>
</ol>
<ul>
<li><p>数据设置<br>实际上链式调用即可</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> buildTree = Tree(describes)</span><br><span class="line">    .setChildTree(<span class="number">0</span>, publicTree)</span><br><span class="line">    .setU8(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line">    .setS32(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">    .setFloat(<span class="number">3</span>, <span class="number">3.0f</span>)</span><br><span class="line">    .setU32(<span class="number">4</span>, <span class="number">32L</span>)</span><br><span class="line">    .setString(<span class="number">5</span>, <span class="string">"123"</span>, <span class="string">"UTF-8"</span>)</span><br></pre></td></tr></table></figure>
<p>设置完毕后直接使用内部方法转化为byte数组,后续进行传输或传输方有直接提供传入方法</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> buildTreeResult = buildTree.toByteArray()</span><br></pre></td></tr></table></figure>
</li>
<li><p>数据解析</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">paresTree.parserByteArray(array)</span><br><span class="line"><span class="keyword">val</span> childTree = paresTree.getChildTree(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">val</span> childTreeIndex0 = childTree.getU8(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">val</span> childTreeIndex1 = childTree.getU8(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">val</span> index0 = paresTree.getU8(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">val</span> index1 = paresTree.getS32(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">val</span> index2 = paresTree.getFloat(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">val</span> index3 = paresTree.getU32(<span class="number">4</span>)</span><br><span class="line"><span class="keyword">val</span> index4 = paresTree.getString(<span class="number">5</span>, <span class="string">"UTF-8"</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2018/08/11/gradle%E8%87%AA%E5%8A%A8%E7%BC%96%E8%AF%91%E4%B8%8A%E5%B1%82%E5%BA%94%E7%94%A8/">gradle自动编译</a><a class="next" href="/2018/07/28/byte%E6%95%B0%E7%BB%84%E5%BC%8F%E5%8D%8F%E8%AE%AE%E8%A7%A3%E6%9E%90/%E5%B0%86Java%E7%9A%84byte%E6%95%B0%E7%BB%84%E5%88%86%E6%AE%B5%E8%A7%A3%E6%9E%90%E4%B8%BA%E6%89%80%E9%9C%80%E6%95%B0%E6%8D%AE%E7%9A%84%E5%B7%A5%E5%85%B7%E7%B1%BBBytesReader/">将Java的byte数组分段解析为所需数据的工具类BytesReader</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'pOPN3gd1pf40YQigNVmUEJh8-gzGzoHsz',
  appKey:'3KwDEXlwTEyv8LExh2vxXtxM',
  placeholder:'Why so serious?',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Other/">Other</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/View/" style="font-size: 15px;">View</a> <a href="/tags/Framework/" style="font-size: 15px;">Framework</a> <a href="/tags/Bluetooth/" style="font-size: 15px;">Bluetooth</a> <a href="/tags/adb/" style="font-size: 15px;">adb</a> <a href="/tags/gradle/" style="font-size: 15px;">gradle</a> <a href="/tags/markdown/" style="font-size: 15px;">markdown</a> <a href="/tags/WSL/" style="font-size: 15px;">WSL</a> <a href="/tags/repo/" style="font-size: 15px;">repo</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/01/06/AboutMeInTheseFiveYears/">过往的记录与总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/08/10/wsl2%E7%9A%84%E4%BD%BF%E7%94%A8/">wsl2的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/20/%E6%9E%84%E5%BB%BArepo%E7%AE%A1%E7%90%86%E5%A4%9A%E4%B8%AAApp,%E5%9C%A8linux%E7%8E%AF%E5%A2%83%E8%87%AA%E5%8A%A8%E7%BC%96%E8%AF%91/">构建repo管理多个App,在linux环境自动编译</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/26/%E8%93%9D%E7%89%99/Android%20%E8%93%9D%E7%89%99%E4%BB%8E%E6%9C%BA%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%A6%82%E8%BF%B0/">Android蓝牙从机模式实现概述</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/14/gradle%E7%BC%96%E8%AF%91library%E5%B9%B6%E4%B8%80%E9%94%AE%E4%B8%8A%E4%BC%A0maven/">gradle编译library并一键上传maven</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/11/wait/QuickSideBarView%E5%88%97%E8%A1%A8%E6%98%BE%E7%A4%BA%E6%97%B6%E7%9A%84%E5%AD%97%E6%AF%8D%E7%B4%A2%E5%BC%95%E6%8E%A7%E4%BB%B6%E7%9A%84%E5%AE%9E%E7%8E%B0/">QuickSideBarView列表显示时的字母索引控件的实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/29/wait/%E9%80%9A%E8%BF%87%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%98%E5%88%B6%E5%AE%9E%E7%8E%B0%E7%82%AB%E9%85%B7%E7%9A%84%E8%BD%A6%E8%BE%86%E4%BB%AA%E8%A1%A8%E7%9B%98%E6%95%88%E6%9E%9C/">通过自定义控件绘制实现炫酷的车辆仪表盘效果</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/11/git/SVN%E8%BF%81%E7%A7%BB%E5%88%B0Git%E4%BF%9D%E7%95%99%E5%AE%8C%E6%95%B4%E7%9A%84log/">SVN迁移到Git保留完整的log</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/13/wait/Android%E5%BC%82%E5%B8%B8%E5%B4%A9%E6%BA%83%E7%9A%84%E6%8D%95%E8%8E%B7/">Android异常崩溃的捕获</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/09/wait/Android%E7%A7%BB%E5%8A%A8%E7%BD%91%E7%BB%9C%E4%BF%A1%E5%8F%B7%E7%9A%84%E6%98%BE%E7%A4%BA%E6%9C%BA%E5%88%B6%E7%9B%B8%E5%85%B3%E7%9A%84%E5%88%86%E6%9E%90%E5%92%8C%E4%BF%A1%E5%8F%B7%E5%BC%BA%E5%BA%A6%E7%AD%89%E7%BA%A7%E5%AE%9A%E5%88%B6/">Android移动网络信号的显示机制相关的分析和信号强度等级定制</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://gallonyin.github.io/" title="GallonYin" target="_blank">GallonYin</a><ul></ul><a href="http://zphuanlove.github.io/" title="zhongpeihuan" target="_blank">zhongpeihuan</a><ul></ul><a href="https://blog.csdn.net/qq_33487044" title="雪松研究所" target="_blank">雪松研究所</a><ul></ul><a href="https://wkingdom.github.io/" title="WZKingdom" target="_blank">WZKingdom</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2022 <a href="/." rel="nofollow">Möbius Strip World.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>